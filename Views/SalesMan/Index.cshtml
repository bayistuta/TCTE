@model IEnumerable<TCTE.Models.SalesMan>

@{
    ViewBag.Title = "业务员列表";
    Layout = "~/Views/Shared/_FormListLayout.cshtml";
}

@section ListHeader{
    <th>
        @Html.DisplayNameFor(model => model.Code)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.Name)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.Gender)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.IdentityCard)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.Phone)
    </th>
    @*<th class="sorting">
        @Html.DisplayNameFor(model => model.IsLicenced)
    </th>*@
    <th>操作</th>
}

@section ListBody{
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Code)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Gender)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.IdentityCard)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Phone)
            </td>
            @*<td>
                @Html.CheckBoxFor(modelItem => item.IsLicenced, new { @class = "iswitch iswitch-secondary chkLicense", value = item.Id })
            </td>*@
            <td style="white-space:nowrap">
                @Html.ActionLink("编辑", "Edit", new { id = item.Id }, new { @class = "btn btn-secondary btn-sm btn-icon icon-left" })
                @Html.ActionLink("查看", "Details", new { id = item.Id }, new { @class = "btn btn-info btn-sm btn-icon icon-left" })
                @Html.ActionLink("删除", "Delete", new { id = item.Id }, new { @class = "btn btn-danger btn-sm btn-icon icon-left btn-del" })
            </td>
        </tr>
    }
}

@section DeleleteFailureReason{
    该业务员处理了1个以上的订单，为保证数据准确性，不允许删除此业务员
}

@section scripts{
    @*<script src="~/assets/js/toastr/toastr.min.js"></script>
    <script>
        // 异步修改状态: 是否上岗
        $(".chkLicense").on("click", function () {
            $.post("@Url.Action("License")", { id: this.value }, function (result) {
                if (result == "success") {
                    toastr.info("已保存");
                } else {
                    toastr.error("系统异常，操作无效");
                }
            });
        });
    </script>*@
}
